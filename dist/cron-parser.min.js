!function(t,e){var n=e();"undefined"!=typeof module&&module.exports&&(module.exports=n),"undefined"!=typeof window&&this===window&&(window.CronParser=n)}(this,function(){"use strict";Date.prototype.addYear=function(){this.setFullYear(this.getFullYear()+1)},Date.prototype.addMonth=function(){this.setMonth(this.getMonth()+1),this.setDate(1),this.setHours(0),this.setMinutes(0),this.setSeconds(0)},Date.prototype.addDay=function(){var t=this.getDate();this.setDate(t+1),this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.getDate()===t&&this.setDate(t+2)},Date.prototype.addHour=function(){var t=this.getHours();this.setHours(t+1),this.getHours()===t&&this.setHours(t+2),this.setMinutes(0),this.setSeconds(0)},Date.prototype.addMinute=function(){this.setMinutes(this.getMinutes()+1),this.setSeconds(0)},Date.prototype.addSecond=function(){this.setSeconds(this.getSeconds()+1)};var t;!function(){t=function(e,n){this._options=n,this._currentDate=new Date(n.currentDate),this._endDate=n.endDate?new Date(n.endDate):null,this._fields={};for(var r=0,i=t.map.length;i>r;r++){var s=t.map[r];this._fields[s]=e[r]}},t.map=["second","minute","hour","dayOfMonth","month","dayOfWeek"],t.predefined={"@yearly":"0 0 1 1 *","@monthly":"0 0 1 * *","@weekly":"0 0 * * 0","@daily":"0 0 * * *","@hourly":"0 * * * *"},t.constraints=[[0,59],[0,59],[0,23],[1,31],[1,12],[0,7]],t.daysInMonth=[31,28,31,30,31,30,31,31,30,31,30,31],t.aliases={month:{jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12},dayOfWeek:{sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6}},t.parseDefaults=["0","*","*","*","*","*"],t._parseField=function(e,n,r){function i(t){function n(t){var n=i.length>0?Math.max.apply(Math,i):-1;if(t instanceof Array)for(var s=0,a=t.length;a>s;s++){var o=t[s];if(o<r[0]||o>r[1])throw new Error("Constraint error, got value "+o+" expected range "+r[0]+"-"+r[1]);o>n&&i.push(o),n=Math.max.apply(Math,i)}else{if(t=+t,t<r[0]||t>r[1])throw new Error("Constraint error, got value "+t+" expected range "+r[0]+"-"+r[1]);"dayOfWeek"==e&&(t%=7),t>n&&i.push(t)}}var i=[],a=t.split(",");if(a.length>1)for(var o=0,h=a.length;h>o;o++)n(s(a[o]));else n(s(t));return i}function s(t){var e=1,n=t.split("/");return n.length>1?a(n[0],n[n.length-1]):a(t,e)}function a(t,e){var n=[],i=t.split("-");if(i.length>1){if(i.length<2||!i[0].length)return+t;var s=+i[0],a=+i[1];if(Number.isNaN(s)||Number.isNaN(a)||s<r[0]||a>r[1])throw new Error("Constraint error, got range "+s+"-"+a+" expected range "+r[0]+"-"+r[1]);if(s>=a)throw new Error("Invalid range: "+t);for(var o=e,h=s,u=a;u>=h;h++)o>0&&o%e===0?(o=1,n.push(h)):o++;return n}return+t}switch(e){case"month":case"dayOfWeek":var o=t.aliases[e];n=n.replace(/[a-z]{1,3}/gi,function(t){if(t=t.toLowerCase(),o[t])return o[t];throw new Error('Cannot resolve alias "'+t+'"')})}if(!/^[\d|/|*|\-|,]+$/.test(n))throw new Error("Invalid characters, got value: "+n);return-1!==n.indexOf("*")&&(n=n.replace(/\*/g,r.join("-"))),i(n)},t.prototype._findSchedule=function(){function e(t,e){for(var n=0,r=e.length;r>n;n++)if(e[n]>=t)return e[n]===t;return e[0]===t}function n(t,e){return t instanceof Array&&!t.length?!1:2!==e.length?!1:t.length===e[1]-(e[0]<1?-1:0)}var r=new Date(this._currentDate),i=this._endDate;for(0===this._fields.second[0]&&r.addMinute();;){if(i&&i.getTime()-r.getTime()<0)throw new Error("Out of the timespan range");var s=e(r.getDate(),this._fields.dayOfMonth),a=e(r.getDay(),this._fields.dayOfWeek),o=n(this._fields.dayOfMonth,t.constraints[3]),h=n(this._fields.dayOfWeek,t.constraints[4]),u=n(this._fields.dayOfWeek,t.constraints[5]);if(!h){var f=r.getYear(),d=r.getMonth()+1,l=1===d?11:d-1,c=t.daysInMonth[l-1],p=this._fields.dayOfMonth[this._fields.dayOfMonth.length-1],g=!(f%4||!(f%100)&&f%400);if(g&&(c=29),this._fields.month[0]===l&&p>c)throw new Error("Invalid explicit day of month definition")}if(o||!u||s)if(!o||u||a)if(o&&u||s||a)if(e(r.getMonth()+1,this._fields.month))if(e(r.getHours(),this._fields.hour))if(e(r.getMinutes(),this._fields.minute)){if(e(r.getSeconds(),this._fields.second))break;r.addSecond()}else r.addMinute();else r.addHour();else r.addMonth();else r.addDay();else r.addDay();else r.addDay()}return this._currentDate=r},t.prototype.next=function(){return this._findSchedule()},t.prototype.hasNext=function(){var t=this._currentDate;try{return this.next(),!0}catch(e){return!1}finally{this._currentDate=t}},t.prototype.iterate=function(t,e){for(var n=[],r=0,i=t;i>r;r++)try{var s=this.next();n.push(s),e&&e(s,r)}catch(a){break}return n},t.prototype.reset=function(){this._currentDate=new Date(this._options.currentDate)},t.parse=function e(n,r,i){function e(e,n){n||(n={}),n.currentDate||(n.currentDate=new Date),t.predefined[e]&&(e=t.predefined[e]);for(var r=[],i=e.split(" "),s=t.map.length-i.length,a=0,o=t.map.length;o>a;++a){var h=t.map[a],u=i[i.length>o?a:a-s];r.push(s>a||!u?t._parseField(h,t.parseDefaults[a],t.constraints[a]):t._parseField(h,u,t.constraints[a]))}return new t(r,n)}if("function"==typeof r&&(i=r,r={}),"function"!=typeof i)return e(n,r);try{return i(null,e(n,r))}catch(s){return i(s)}}}();var e;return function(){e=function(){},e._parseEntry=function(e){var n=e.split(" ");if(6===n.length)return{interval:t.parse(e)};if(n.length>6)return{interval:t.parse(e),command:n.slice(6,n.length)};throw new Error("Invalid entry: "+e)},e.parseExpression=function(e,n,r){return t.parse(e,n,r)},e.parseExpressionSync=e.parseExpression,e.parseString=function(t){for(var e=this,n=t.split("\n"),r={variables:{},expressions:[],errors:{}},i=0,s=n.length;s>i;i++){var a=n[i],o=null,h=a.replace(/^\s+|\s+$/g,"");if(h.length>0){if(h.match(/^#/))continue;if(o=h.match(/^(.*)=(.*)$/))r.variables[o[1]]=o[2];else{var u=null;try{u=e._parseEntry("0 "+h),r.expressions.push(u.interval)}catch(f){r.errors[h]=f}}}}return r},e.parseFile=function(t,n){require("fs").readFile(t,function(t,r){return t?void n(t):n(null,e.parseString(r.toString()))})}}(),e});
//# sourceMappingURL=cron-parser.min.js.map