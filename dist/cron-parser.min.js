!function(t,e){var r=e();"undefined"!=typeof module&&module.exports&&(module.exports=r),"undefined"!=typeof window&&this===window&&(window.CronParser=r)}(this,function(){"use strict";Date.prototype.addYear=function(){this.setFullYear(this.getFullYear()+1)},Date.prototype.addMonth=function(){this.setDate(1),this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMonth(this.getMonth()+1)},Date.prototype.addDay=function(){var t=this.getDate();this.setDate(t+1),this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.getDate()===t&&this.setDate(t+2)},Date.prototype.addHour=function(){var t=this.getHours();this.setHours(t+1),this.getHours()===t&&this.setHours(t+2),this.setMinutes(0),this.setSeconds(0)},Date.prototype.addMinute=function(){this.setMinutes(this.getMinutes()+1),this.setSeconds(0)},Date.prototype.addSecond=function(){this.setSeconds(this.getSeconds()+1)};var t;!function(){t=function(e,r){this._options=r,this._currentDate=new Date(r.currentDate),this._endDate=r.endDate?new Date(r.endDate):null,this._fields={},this._isIterator=r.iterator||!1;for(var n=0,i=t.map.length;i>n;n++){var s=t.map[n];this._fields[s]=e[n]}},t.map=["second","minute","hour","dayOfMonth","month","dayOfWeek"],t.predefined={"@yearly":"0 0 1 1 *","@monthly":"0 0 1 * *","@weekly":"0 0 * * 0","@daily":"0 0 * * *","@hourly":"0 * * * *"},t.constraints=[[0,59],[0,59],[0,23],[1,31],[1,12],[0,7]],t.daysInMonth=[31,28,31,30,31,30,31,31,30,31,30,31],t.aliases={month:{jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12},dayOfWeek:{sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6}},t.parseDefaults=["0","*","*","*","*","*"],t._parseField=function(e,r,n){function i(t){function r(t){var r=i.length>0?Math.max.apply(Math,i):-1;if(t instanceof Array)for(var s=0,a=t.length;a>s;s++){var o=t[s];if(o<n[0]||o>n[1])throw new Error("Constraint error, got value "+o+" expected range "+n[0]+"-"+n[1]);o>r&&i.push(o),r=Math.max.apply(Math,i)}else{if(t=+t,t<n[0]||t>n[1])throw new Error("Constraint error, got value "+t+" expected range "+n[0]+"-"+n[1]);"dayOfWeek"==e&&(t%=7),t>r&&i.push(t)}}var i=[],a=t.split(",");if(a.length>1)for(var o=0,h=a.length;h>o;o++)r(s(a[o]));else r(s(t));return i}function s(t){var e=1,r=t.split("/");return r.length>1?a(r[0],r[r.length-1]):a(t,e)}function a(t,e){var r=[],i=t.split("-");if(i.length>1){if(i.length<2||!i[0].length)return+t;var s=+i[0],a=+i[1];if(Number.isNaN(s)||Number.isNaN(a)||s<n[0]||a>n[1])throw new Error("Constraint error, got range "+s+"-"+a+" expected range "+n[0]+"-"+n[1]);if(s>=a)throw new Error("Invalid range: "+t);for(var o=e,h=s,u=a;u>=h;h++)o>0&&o%e===0?(o=1,r.push(h)):o++;return r}return+t}switch(e){case"month":case"dayOfWeek":var o=t.aliases[e];r=r.replace(/[a-z]{1,3}/gi,function(t){if(t=t.toLowerCase(),o[t])return o[t];throw new Error('Cannot resolve alias "'+t+'"')})}if(!/^[\d|/|*|\-|,]+$/.test(r))throw new Error("Invalid characters, got value: "+r);return-1!==r.indexOf("*")&&(r=r.replace(/\*/g,n.join("-"))),i(r)},t.prototype._findSchedule=function(){function e(t,e){for(var r=0,n=e.length;n>r;r++)if(e[r]>=t)return e[r]===t;return e[0]===t}function r(t,e){return t instanceof Array&&!t.length?!1:2!==e.length?!1:t.length===e[1]-(e[0]<1?-1:0)}for(var n=new Date(this._currentDate),i=this._endDate;;){if(i&&i.getTime()-n.getTime()<0)throw new Error("Out of the timespan range");var s=e(n.getDate(),this._fields.dayOfMonth),a=e(n.getDay(),this._fields.dayOfWeek),o=r(this._fields.dayOfMonth,t.constraints[3]),h=r(this._fields.dayOfWeek,t.constraints[4]),u=r(this._fields.dayOfWeek,t.constraints[5]);if(!h){var f=n.getYear(),d=n.getMonth()+1,l=1===d?11:d-1,c=t.daysInMonth[l-1],p=this._fields.dayOfMonth[this._fields.dayOfMonth.length-1],g=!(f%4||!(f%100)&&f%400);if(g&&(c=29),this._fields.month[0]===l&&p>c)throw new Error("Invalid explicit day of month definition")}if(o||!u||s)if(!o||u||a)if(o&&u||s||a)if(e(n.getMonth()+1,this._fields.month))if(e(n.getHours(),this._fields.hour))if(e(n.getMinutes(),this._fields.minute)){if(e(n.getSeconds(),this._fields.second))break;n.addSecond()}else n.addMinute();else n.addHour();else n.addMonth();else n.addDay();else n.addDay();else n.addDay()}var y=new Date(n);return this._currentDate!==n&&y.addSecond(),this._currentDate=y,n},t.prototype.next=function(){var t=this._findSchedule();return this._isIterator?{value:t,done:!this.hasNext()}:t},t.prototype.hasNext=function(){var t=this._currentDate;try{return this.next(),!0}catch(e){return!1}finally{this._currentDate=t}},t.prototype.iterate=function(t,e){for(var r=[],n=0,i=t;i>n;n++)try{var s=this.next();r.push(s),e&&e(s,n)}catch(a){break}return r},t.prototype.reset=function(){this._currentDate=new Date(this._options.currentDate)},t.parse=function e(r,n,i){function e(e,r){r||(r={}),r.currentDate||(r.currentDate=new Date),t.predefined[e]&&(e=t.predefined[e]);for(var n=[],i=e.split(" "),s=t.map.length-i.length,a=0,o=t.map.length;o>a;++a){var h=t.map[a],u=i[i.length>o?a:a-s];s>a||!u?n.push(t._parseField(h,t.parseDefaults[a],t.constraints[a])):n.push(t._parseField(h,u,t.constraints[a]))}return new t(n,r)}return"function"==typeof n&&(i=n,n={}),e(r,n)}}();var e;return function(){e=function(){},e._parseEntry=function(e){var r=e.split(" ");if(6===r.length)return{interval:t.parse(e)};if(r.length>6)return{interval:t.parse(e),command:r.slice(6,r.length)};throw new Error("Invalid entry: "+e)},e.parseExpression=function(e,r,n){return t.parse(e,r,n)},e.parseString=function(t){for(var e=this,r=t.split("\n"),n={variables:{},expressions:[],errors:{}},i=0,s=r.length;s>i;i++){var a=r[i],o=null,h=a.replace(/^\s+|\s+$/g,"");if(h.length>0){if(h.match(/^#/))continue;if(o=h.match(/^(.*)=(.*)$/))n.variables[o[1]]=o[2];else{var u=null;try{u=e._parseEntry("0 "+h),n.expressions.push(u.interval)}catch(f){n.errors[h]=f}}}}return n},e.parseFile=function(t,r){require("fs").readFile(t,function(t,n){return t?void r(t):r(null,e.parseString(n.toString()))})}}(),e});
//# sourceMappingURL=cron-parser.min.js.map